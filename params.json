{
  "name": "pied piper-blog",
  "tagline": "",
  "body": "### 缓存\r\n\r\n   缓存按照数据存放介质分类： 1、 内存缓存  2、文件缓存\r\n   缓存按照存放的数据分类： 1、 数据缓存    2、 页面静态化\r\n\r\n        数据缓存：只保存数据库中的数据\r\n        页面静态化：将动态页面变成静态页面\r\n \r\n   缓存按照存放服务器位置分类： 1、 本地缓存   2、远程缓存\r\n    \r\n        本地缓存：就是将数据存放到应用服务器的就是本地缓存\r\n        远程缓存： 缓存数据不再应用服务器\r\n   \r\n  \r\n \r\n   缓存作用： 1、减少对数据库查询   2、加快查询速度 \r\n\r\n\r\n   如何做缓存： \r\n\r\n       在缓存之前，首先得选择做哪种缓存。 选择数据缓存还是页面静态化？  \r\n\r\n数据缓存特点：只是保存数据，并且数据一般保存到内存中。\r\n页面静态化特点： 保存整个页面，这个页面一般保存到文件中。 \r\n\r\n\r\n     如果是类似于文章页的页面，应该选择页面静态化。 特点：页面改动不大的页面，都应该选择页面静态化。\r\n\r\n     如果类似商品详情页，应该选择数据缓存。原因是： 商品详情页的数据经常发生改变。特点：如果页面的数据经常发生改变，应该选择数据缓存。\r\n\r\n\r\n\r\n   确定选择缓存类型为数据缓存，接下来问题是,将哪些数据缓存到memcache， 将热数据缓存到内存中。\r\n\r\n\r\n\r\n\r\n  一个非热数据变成热数据，应该找个数据找到，然后缓存到内存中。\r\n  找个功能如何实现：  写一个计划任务，这个任务定时在每天凌晨的4点，定时执行一个php文件，php文件里面的代码： 先去查数据库得到热数据， 然后将热数据存放到memcache。\r\n  \r\n   第二天用户来购买、浏览商品，这个时候用户读取的数据其实都是从memcache拿出来。\r\n   \r\n \r\n\r\n   goods\r\n   id   gname        view(访问量)\r\n    1    瓦           1                      10000万 \r\n    2   jj           1000\r\n\r\n\r\n   \r\n### 缓存时间的问题\r\n\r\n   1、缓存时间缓存多久\r\n   \r\n        应该根据数据变化特点来设定缓存时间\r\n\r\n   2、 缓存时间都一样可以吗？\r\n     \r\n        缓存时间不能设置成一样，原因是：缓存失效后会同时去查询数据库，这个数据库压力上升。\r\n        缓存时间最好有一个时间差。\r\n\r\n\r\n\r\n  \r\n\r\n  \r\n\r\n\r\n  \r\n\r\n## 热数据\r\n\r\n  经常被查的数据就是热数据。\r\n  热数据有： 1、 热销商品  2、 点击量高商品  3、 首页数据 \r\n\r\n\r\n\r\n## 请问你使用过Memcache吗，你的项目是如何运用的？\r\n\r\n   使用过， 首先我会将一些热数据查询出来，比如热销商品。然后通过memcache将热数据存放到内存中。\r\n\r\n\r\n\r\n## 增加应用服务器\r\n\r\n  原来只有一台应用服务器，现在有3台应用服务器。 如何架构应用服务器？ \r\n\r\n负载均衡器的作用：起到分发请求给不同的应用服务器的作用。\r\n其中哪些东西可以做到负载据衡器的功能： 1、nginx  2、 LVS （开源免费软件）  3、 F5(硬件，价格贵)\r\n\r\n\r\n## 冗余技术\r\n  冗余技术： 增加多余的设备，以保证系统可靠性。\r\n\r\n\r\n## 搭建应用服务器集群需要注意的问题\r\n\r\n 1、 每台应用服务器的代码都是一样\r\n 2、 SESSION数据无法共享问题\r\n\r\n        解决方案：1、将SESSION的数据存放到数据库中  2、Memcache中\r\n\r\n\r\n### SESSION\r\n\r\n 1. SESSION默认情况下是通过文件方式保存起来的，但是我们可以改变SESSION保存方式（ user/memcache ）  user:可以将SESSION存放到数据库中\r\n\r\n\r\n\r\n## 数据库读写分离\r\n\r\n  通过增加数据库服务器数量，将数量变成5台。  第一台数据库服务器负责网站写操作，叫做主库，第二台给主库搞一个备份，第3/4/5都是负责读操作，叫做从库。为什么从库需要三台服务器，因为查得多。\r\n\r\n\r\n  主库(254)：负责写   insert into user(name) values('jack');\r\n\r\n  从库(253):负责读   select * from user where name = 'jack';\r\n\r\n\r\n  读写分离原理：  主库写的SQl语句都会被记录下来，被记录到一个叫做bin-log(二进制日志文件中)，\r\n\r\n 从库复制主库的bin-log文件，然后重新执行一次，数据就同步了。\r\n\r\n\r\n## 数据库读写分离常见方案\r\n\r\n  1、利用bin-log实现\r\n  2、 利用proxy360这个软件实现",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}